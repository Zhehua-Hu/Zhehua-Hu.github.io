---
layout: post
title: NvidiaTX1配置caffe
category: 工程录
tags: 深度学习配置
keywords:
description:
---




借鉴于马亚龙博客


name=JetPack-L4T-2.3-linux-x64.run 
chmod +x name

# install process

# change into Nvidia...
# make -j12
# run ./smoke...




1. 安装依赖库

sudo add-apt-repository universe
sudo apt-get update -y

sudo apt-get install cmake -y
# General Dependencies
sudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev \
libhdf5-serial-dev protobuf-compiler -y
sudo apt-get install --no-install-recommends libboost-all-dev -y
# BLAS
sudo apt-get install libatlas-base-dev -y
# Remaining Dependencies
sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev -y
sudo apt-get install python-dev python-numpy -y

 
2. 编译 Caffe

git clone https://github.com/BVLC/caffe.git 
cd caffe 
cp Makefile.config.example Makefile.config

修改Makefile.config:

# cuDNN acceleration switch (uncomment to build with cuDNN).
USE_CUDNN := 1

# Uncomment if you're using OpenCV 3
OPENCV_VERSION := 3

# Uncomment to support layers written in Python (will link against Python libs)
WITH_PYTHON_LAYER := 1


由于hdf5库目录更改，所以需要单独添加：

INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/
LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /usr/lib/aarch64-linux-gnu/hdf5/serial/



之后编辑即可

make -j4 all
make -j4 runtest



为了更好地使用pycaffe ，建议安装：

sudo apt-get install python-numpy python-setuptools python-pip cython python-skimage python-protobuf

make pycaffe

  
到这里Caffe开发环境就配置好了！
可以测试一下，输出AlexNet的时间测试结果：

cd ~/caffe
./build/tools/caffe time --gpu 0 --model ./models/bvlc_alexnet/deploy.prototxt
