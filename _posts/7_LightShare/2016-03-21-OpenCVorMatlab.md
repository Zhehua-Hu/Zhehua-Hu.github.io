---
layout: post
title: "计算机视觉用MATLAB还是OpenCV, OpenCV编程用C++还是Python?"
category: 轻分享
tags: 漫谈
keywords: 
description: 
---


> “凡人陷入的，往往是圣战；不凡人考虑的，才是大家吃什么。”   ——不是鲁迅


一般而言，只有顶级高手才有“不滞于物，草木竹石均可为剑“的境界，
不过这个时候他们已经秃头了。而一流高手匠人备有一组工具，
根据使用情形选择最适合和顺手的那一个。

本文将跳开过多细节与特殊情况，也就是放弃完整性，保全可读性。
或者说，如果你本来就很纠结了，这里不会增加内容
增加你的选择纠结症——“在xxx情况下”或“因为xxx的设计”，
其实A不比B慢。其实这纯属抬杠，请宽心，本文没有这些内容。



一、问题引入
------------

在计算机视觉领域（本文不区分计算机视觉/机器视觉），新手会面临一个“艰难”的选择——我是该用MATLAB还是OpenCV来实现？如果用OpenCV，该使用C++还是Python接口？其实如今远比十几年前好很多，那时候如果你要实现什么功能，只能从教材或论文中的原理开始编程实现。看来，随着社会发展，“实现”这个词正变得轻盈。

话说回头，作为一个新手，第一目标是使用“多快好省”4个元素的排列组合来达成学习目的，这里默认为**选择一块阻力最小的学习道路**。**——**如果你已经熟悉MATLAB，那就用它；已经熟悉C++，那就用OpenCV(C++)；熟悉python，使用OpenCV(python)。当完成了最开始的学习/应用目标，你就有更主观的关于工具选择的思考了。

二、使用MATLAB的优点 
---------------------

### 1. 强大的矩阵运算支持

计算机视觉中处理图像与视频是采用线性代数方法的，不仅如此，如果你是控制机器人、开发游戏等编程重度用户，你得接收这是一个矩阵支配的世界。熟悉MATLAB的朋友知道它就是为此而生的数学工具。比如MATLAB中的一条语句X=A\\B，如果要你用C++去实现，你的第一个成型版本还不一定比MATLAB快。而这些矩阵运算，MATLAB已经提供了简单接口。

### 2. 工具箱Toolboxes支持

这个就太多了，是MATLAB的统一（卖钱）战线。视觉工具箱，图像处理工具箱，统计与机器学习工具箱等等。在计算机视觉领域，很多问题最后变成了一个优化问题，需要求最大化或最小化某个值，而MATLAB就有优化工具箱，调用它求解就方便多了。

### 3. 方便的可视化与调试

MATLAB画图方便，这个基本是共识。至于说调试方便是基于它是IDE环境，从生产效率上来说，这是很可取的。

### 4. MATLAB提供了OpenCV接口

是的，可能用到的人不多，详见文档。

### 5. 官方文档与接口人性化

MATLAB的官方文档的链接性与示例都比较好。

”人性化“其实有一种”我很懒/好烦/花了钱/不想装X，别麻烦我了”的意味。同样是一行语句显示图片：
```
% MATLAB
imshow(im);

# OpenCV
imshow("myWindow", im);
```

有时候你就是想显示张图，名称什么的很随便啊，多敲个字就是累。

### 6. 支持广泛

MATLAB在国内的影响力就无需多言了（Mathematica的朋友现在给个赞！），基本上搜索引擎就是第二个示例程序库。而且你的老师，以及其他能请教的前辈当年基本也用它，他们能给你更好的帮助。

三、使用MATLAB的缺点
--------------------

### 1. 花钱！

虽然版权在不同国界有缤纷的见解与支持，但真在商业上用盗版MATLAB，那就不太轻松了。
首先基础版MATLAB (\$2,150) ，你要视觉工具箱
(\$1,350).吗？要的话先要买图像处理工具箱 (\$1000)作为底层。加上优化工具箱
(\$1,350)和机器学习工具箱(\$1000).就到达了逆天的 \$6850!
如果你要在嵌入式产品上运行，那你还要个编译器(\$4,250)，双系统支持再付一次\$4,250。如果公司或者学习没有许可，那值得与否就自行估量了。

### 2. 正确编程风格同样也要学习

MATLAB的编程风格是将运算基于向量/矩阵的，不符合这种风格的编程，自然就不够快。所以，花时间吧。

### 3. 运行速度与闭源

MATLAB写的某个大中型系统比不过良好设计的C++实现版本的，再加上其Built-in看不到函数实现，有时候想修改函数却做不到，是重新写还是放弃？转投开源阵营？

而且MATLAB的程序要脱离runtime库支持，实现无MATLAB环境运行比较麻烦。而且多平台支持就。，Android版本出来后请告知我。

四、使用OpenCV(C++)的优点
-------------------------

### 1. 免费！

不管是个人使用还是商业，都是免费的！太多美好而不花钱的事物决定了人对世界与自身族群的理解，比如阳光，清洁的空气，免费续杯以及…开源的OpenCV。

### 2. 专门优化的代码

很多代码都为真实的应用而优化过，比如OpenCV 3中你可以用Transparent
API调用支持OpenCL的器件（如GPU）。有很多算法都有CUDA的实现。

### 3. 跨平台支持

不管是桌面应用，嵌入式还是web应用，全支持！

### 4. 世界范围的社区支持

这主要是针对OpenCV的社区组成而言，除了纯粹的学术研究人群给外，还有许多工业界与商业界的人群支持，还有资金上的，比如Intel,
AMD , NVidia , Google等公司。

### 5. 易组成工具链

OpenCV的小伙伴PCL目前（201605）还没有比较好的Python接口与文档。更不用说你写的底层传感器与执行器驱动？显示界面？ROS？数学运算与优化的各类优化包？这些工具是使用C/C++的，统一编程语言能造就更协调的工具链。

五、使用OpenCV(C++)的缺点
-------------------------

###  1. 编程语言较Python要繁复

这里很容易引发圣战，如果你是编程新手，Python适合作为你的第一门编程语言。作为OpenCV学习而言，也是如此（如果你没有C++经验的话）。

###  2. 文档不够好

免费的东西多好才能算好，这是一个问题。为了加快理解所需函数，你可以购买市面上教程补充。

###  3. 机器学习库支持不够

这当然是由于多数（好用）的库都是Python造成的。

###  4. 可视化不够，调试麻烦

可视化不够在于C++没有Python这样丰富的图像库支持（而且还很方便）。

调试问题就在于C++自身了，指针与内存管理的担子不轻松。

六、使用OpenCV(python)的优点
----------------------------

###  1. 易用！

Pythoner从来就不争谁是世界上最好的语言（PHP梗）；

Pythoner做一件事只有一种方法（Perl梗），但有2和3两个版本（*Guido*你要是一开始就不忘记print括号，我们还是好朋友）。

如果你厌烦了配置VS/Eclipse+OpenCV中一系列库路径配置，请使用Python！我们只要：

```
import cv2
```

###  2. Python是科学计算语言

如果是多年前，这个地位还是MATLAB的。但是使用Python-OpenCV, 你还可以拥有过numpy,
scipy, scikit-learn,
matplotlib等等，都是免费的！大部分机器学习库最好的接口也是Python。

###  3. 可视化与调试方便

可视化得益于Python的多种库的支持；

作为一门脚本型语言，python远比C++调试轻松。

###  4. web后台支持好

当然，这也只是个Python支持好的佐证，比如Django, Web2py, and Flask。

七、使用OpenCV(python)的缺点
----------------------------

###  1. 文档支持比C++弱

OpenCV用C++写的，毕竟是亲生的感觉。

###  2. 开发支持比C++弱

再一次，由于OpenCV用C++写的，所以新功能会先有C++接口，比如Transparent API。

###  3. 运行速度比C++慢

一般而言，C++更底层，代码运行更高效（不谈论特殊情形）。当OpenCV（C++）CUDA使用或者OpenCL提速后远比Python要快了。虽然Python接口可以binding
C++，但这样绕过一层，有了一种隔靴搔痒的感觉。

八、小结
--------

如果你熟悉某个环境/语言，请选择它；

如果你是实验室小能手，想快速做出东西，有前辈的MATLAB瑰宝，选择MATLAB；

如果你是个新手，有实际产品或者嵌入式需求，从Python-OpenCV开始，等搭建好原型后，再选用C++提速/优化。

九、
--------

[1] 本文部分改写于

<http://www.learnopencv.com/opencv-c-vs-python-vs-matlab-for-computer-vision/>

[2] 个人经验
