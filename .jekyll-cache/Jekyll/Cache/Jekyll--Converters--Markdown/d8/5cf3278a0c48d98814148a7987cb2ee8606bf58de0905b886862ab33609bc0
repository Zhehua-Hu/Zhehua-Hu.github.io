I"M<h2 id="ç»ªè®º">ç»ªè®º</h2>
<p>æœ¬æ–‡å®ç°</p>

<p>ç¬”è€…çš„å·¥ä½œç¯å¢ƒåŸºäºPycharmï¼Œå¦‚æœ‰å…´è¶£äº†è§£ï¼Œå‚è§[]
ä¸ºäº†ç…§é¡¾ä¸åŒç¯å¢ƒçš„è¯»è€…ï¼Œä»¥ä¸‹è®²è§£åŸºäºç»ˆç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åº”è¯¥å¦‚ä¸‹è¿è¡Œç¨‹åºï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python path/to/tutorial.py
</code></pre></div></div>

<p>å»ºè®®ä½ ä¸‹è½½ä»£ç ç¤ºä¾‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/Zhehua-Hu/MakeAPI-Tutorials.git MakeAPI-Ref
</code></pre></div></div>

<p>ç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§æœ¬æ–‡ä¸€æ­¥æ­¥è¿›è¡Œï¼Œæœ‰ç–‘é—®å†å‚è€ƒä»£ç ç¤ºä¾‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir MakeAPI-Tutorials &amp;&amp; cd  MakeAPI-Tutorials
</code></pre></div></div>

<h2 id="é…ç½®virtualenvç¯å¢ƒ">é…ç½®virtualenvç¯å¢ƒ</h2>
<ul>
  <li>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿpythonç¯å¢ƒå·¥å…·ã€€virtualenvï¼Ÿ</li>
</ul>

<p>åŸå› åœ¨äºï¼Œå½“ä½ éœ€è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªä½¿ç”¨äº†pythonçš„é¡¹ç›®æ—¶ï¼Œ
virtualenvä½¿å¾—è¿™äº›é¡¹ç›®å¯ä»¥åœ¨åŒä¸€æ—¶é—´åŸºäºä¸åŒç‰ˆæœ¬çš„pythonä¸åº“è¿è¡Œã€‚</p>

<ul>
  <li>å®‰è£…</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install virtualenv
virtualenv --version
</code></pre></div></div>

<ul>
  <li>åˆ›å»º</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>virtualenv newpy --python=python2.7
# virtualenvæœ‰äº›å¯é€‰å‚æ•°ï¼Œä¸Šæ¡å‘½ä»¤é€‰æ‹©ä½¿ç”¨çš„pythonç‰ˆæœ¬
# å…·ä½“æŸ¥è¯¢
virtualenv --help
</code></pre></div></div>

<ul>
  <li>å·¥ä½œæ–¹å¼</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source ./newpy/bin/activate

# è¿™ä¹‹åå°±è¿›å…¥äº†è™šæ‹Ÿç¯å¢ƒ
# &lt;working time&gt;

# é€€å‡ºè™šæ‹Ÿç¯å¢ƒ
deactive
</code></pre></div></div>

<hr />
<p>æ³¨æ„ï¼šä¸‹æ–‡å‡åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹newpyè¿›è¡Œ</p>
<h2 id="flaskå…¥é—¨helloworld">flaskå…¥é—¨ï¼šhelloworld</h2>

<h3 id="å®‰è£…flask">å®‰è£…flask</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install flask
</code></pre></div></div>

<h3 id="helloworldç¤ºä¾‹">helloworldç¤ºä¾‹</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir demo1_helloworld &amp;&amp; cd demo1_helloworld
touch helloworld.py
</code></pre></div></div>

<p>helloworld.py å¦‚ä¸‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!newpy/bin/python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return "Hello, World!"

if __name__ == '__main__':
    app.run(debug=True)
</code></pre></div></div>

<p>è¿è¡Œ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python helloworld.py
</code></pre></div></div>

<p>é€šè¿‡æµè§ˆå™¨æ‰“å¼€</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>firefox http://127.0.0.1:5000/
</code></pre></div></div>

<h3 id="é‡Šç–‘">é‡Šç–‘</h3>

<ul>
  <li>returnè¿”å›ç½‘é¡µï¼Œæ•…å¯ä»¥return stringæˆ–htmlæ ¼å¼</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>return "Hello, World!"
return "&lt;h1 style='color:black    '&gt;Hello, World!&lt;/h1&gt;"
</code></pre></div></div>

<ul>
  <li>app.run()çš„å‚æ•°</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># æ— å‚æ•°
app.run()

# è°ƒè¯•æ¨¡å¼
app.run(debug=True)

# 
# app.run(debug=True, port=8080)

# é»˜è®¤hostä¸ºæœ¬æœºåœ°å€localhost, ä¸€èˆ¬è¢«è®¾ç½®ä¸ºæœ¬æœºå›ç¯åœ°å€127.0.0.1

# app.run(debug=True, host='192.168.1.131', port=8080)
app.run(debug=True, host='0.0.0.0', port=8080)
</code></pre></div></div>

<p>##ã€€å·¥ä½œåºåˆ—</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>venv/bin/pip install flask-httpauth


curl -i http://192.168.1.131:8080/todo/api/v1.0/tasks
curl -u ok:python -i http://192.168.1.131:8080/todo/api/v1.0/tasks
curl -u ok:python -i http://121.69.57.2:8080/todo/api/v1.0/tasks


curl -u ok:python -i http://192.168.1.131:8080/todo/api/v1.0/tasks/1


curl -u ok:python -i -H "Content-Type: application/json" \
-X POST -d '{"add1":3.1415, "add2":3.1}' \
http://tagea.ngrok.cc/api

curl -u ok:python -i -H "Content-Type: application/json" \
-X POST -d '{"crmR": "genvict01", "name": "crm99", "id": "12345678", "add1": 3.1415, "add2":3.1}' \
http://tagea.ngrok.cc/api


curl -u ok:python -i -H "Content-Type: application/json" \
-X POST -d '{"crmR": "genvict01", "name": "crm99", "id": "12345678", "picurl": "http://zhehua.info/assets/images/misc/Selection_001.png", "add1": 3.1415, "add2":3.1}' \
http://tagea.ngrok.cc/api


curl -u ok:python -i -H "Content-Type: application/json" \
-X POST -d '{"crmR": "genvict01", "name": "crm99", "carid": "12345678", 
"picurl": "http://zhehua.info/assets/images/misc/Selection_001.png", 
"mode": "request", rt": "default", "info": "default"}' \
http://tagea.ngrok.cc/api


#-----

curl -u ok:python -i http://tagea.ngrok.cc/api

curl -u ok:python -i -H "Content-Type: application/json" \
-X POST -d '{"id": 1, "crmR": "genvict01", "name": "crm99", "carid": "12345678", 
"picurl": "http://zhehua.info/assets/images/misc/Selection_001.png",
"mode": "request", "rt": "default", "info": "default"}' \
http://tagea.ngrok.cc/api



</code></pre></div></div>

<p>##</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir demo2_query_json &amp;&amp; cd demo2_query_json
</code></pre></div></div>

<p>##</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir demo3_update_delete &amp;&amp; cd demo3_update_delete
</code></pre></div></div>

<p>##</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir demo4_access_externally &amp;&amp; cd demo4_access_externally
</code></pre></div></div>

<blockquote>

  <p><code class="language-plaintext highlighter-rouge">-u: authorize</code>
-d: â€“data
-X: set protocol
-i: â€“include
-H: â€“header</p>
</blockquote>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p>Miguel Grinbergçš„åšå®¢
    * <a href="https://blog.miguelgrinberg.com/post/designing-a-restful-api-with-python-and-flask">Designing a RESTful API with Python and Flask</a></p>

<p>ä¸Šæ–‡ä¸­è¯‘
    * <a href="http://www.pythondoc.com/flask-restful/first.html">ä½¿ç”¨ Python å’Œ Flask è®¾è®¡ RESTful API</a></p>

<p>flask
<a href="http://www.cnblogs.com/knarfeh/p/5616515.html">å†™ç»™æ–°æ‰‹çœ‹çš„Flask+uwsgi+Nginx+Ubuntuéƒ¨ç½²æ•™ç¨‹</a></p>

:ET